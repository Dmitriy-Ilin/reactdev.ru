---
status: experimental
description: cache –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–±–æ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
---

# cache

!!!example "Canary"

    -   `cache` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å [React Server Components](https://react.dev/blog/2023/03/22/react-labs-what-we-have-been-working-on-march-2023#react-server-components). –°–º–æ—Ç—Ä–∏—Ç–µ [—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏](../../learn/start-a-new-react-project.md#bleeding-edge-react-frameworks), –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç React Server Components.

    -   `cache` –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤ –∫–∞–Ω–∞–ª–∞—Ö React [Canary](https://react.dev/community/versioning-policy#canary-channel) –∏ [experimental](https://react.dev/community/versioning-policy#experimental-channel). –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –ø—Ä–µ–∂–¥–µ —á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `cache` –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ. –£–∑–Ω–∞–π—Ç–µ –±–æ–ª—å—à–µ –æ [–∫–∞–Ω–∞–ª–∞—Ö –≤—ã–ø—É—Å–∫–∞ React –∑–¥–µ—Å—å](https://react.dev/community/versioning-policy#all-release-channels).

<big>`cache` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–±–æ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.</big>

```js
const cachedFn = cache(fn);
```

## –û–ø–∏—Å–∞–Ω–∏–µ {#reference}

### `cache(fn)` {#cache}

–í—ã–∑–æ–≤–∏—Ç–µ `cache` –≤–Ω–µ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –≤–µ—Ä—Å–∏—é —Ñ—É–Ω–∫—Ü–∏–∏ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

```js hl_lines="4 7"
import { cache } from 'react';
import calculateMetrics from 'lib/metrics';

const getMetrics = cache(calculateMetrics);

function Chart({ data }) {
    const report = getMetrics(data);
    // ...
}
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ `getMetrics` —Å `data`, `getMetrics` –≤—ã–∑–æ–≤–µ—Ç `calculateMetrics(data)` –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫—ç—à–µ. –ï—Å–ª–∏ `getMetrics` –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ —Å–Ω–æ–≤–∞ —Å —Ç–µ–º–∏ –∂–µ `data`, –æ–Ω–∞ –≤–µ—Ä–Ω–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–º–µ—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ `calculateMetrics(data)`.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã {#parameters}

-   `fn`: –§—É–Ω–∫—Ü–∏—è, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–π –≤—ã —Ö–æ—Ç–∏—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã. –§—É–Ω–∫—Ü–∏—è `fn` –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ª—é–±—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

#### –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç {#returns}

`cache` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é `fn` —Å —Ç–æ–π –∂–µ —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π —Ç–∏–ø–∞. –ü—Ä–∏ —ç—Ç–æ–º –≤—ã–∑–æ–≤ `fn` –Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è.

–ü—Ä–∏ –≤—ã–∑–æ–≤–µ `cachedFn` —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏ —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫—ç—à–µ. –ï—Å–ª–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ. –ï—Å–ª–∏ –Ω–µ—Ç, –æ–Ω –≤—ã–∑—ã–≤–∞–µ—Ç `fn` —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫—ç—à–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `fn`, —ç—Ç–æ –∫–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–æ–ø—É—Å–∫ –∫—ç—à–∞.

!!!note "–ú–µ–º–æ–∏–∑–∞—Ü–∏—è"

    –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑–≤–µ—Å—Ç–Ω–∞ –∫–∞–∫ [_–º–µ–º–æ–∏–∑–∞—Ü–∏—è_](https://ru.wikipedia.org/wiki/–ú–µ–º–æ–∏–∑–∞—Ü–∏—è). –ú—ã –Ω–∞–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—É—é –∏–∑ `cache`, –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π.

#### –ó–∞–º–µ—á–∞–Ω–∏—è {#caveats}

-   React –∞–Ω–Ω—É–ª–∏—Ä—É–µ—Ç –∫—ç—à –¥–ª—è –≤—Å–µ—Ö –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ —Å–µ—Ä–≤–µ—Ä–∞.
-   –ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ `cache` —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã–∑–æ–≤ `cache` —Å –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ —Ñ—É–Ω–∫—Ü–∏–µ–π –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫—ç—à.
-   `cachedFn` —Ç–∞–∫–∂–µ –±—É–¥–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏. –ï—Å–ª–∏ `fn` –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –æ–Ω–∞ –±—É–¥–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∞, –∏ —Ç–∞ –∂–µ –æ—à–∏–±–∫–∞ –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤—ã–±—Ä–æ—à–µ–Ω–∞, –∫–æ–≥–¥–∞ `cachedFn` –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ —Å —Ç–µ–º–∏ –∂–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏.
-   `cache` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ [–°–µ—Ä–≤–µ—Ä–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö](https://react.dev/blog/2023/03/22/react-labs-what-we-have-been-working-on-march-2023#react-server-components).

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ {#usage}

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Ä–æ–≥–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π {#cache-expensive-computation}

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `cache` –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ –¥—É–±–ª–∏—Ä—É—é—â–µ–π —Ä–∞–±–æ—Ç—ã.

```js hl_lines="7 13"
import { cache } from 'react';
import calculateUserMetrics from 'lib/user';

const getUserMetrics = cache(calculateUserMetrics);

function Profile({ user }) {
    const metrics = getUserMetrics(user);
    // ...
}

function TeamReport({ users }) {
    for (let user in users) {
        const metrics = getUserMetrics(user);
        // ...
    }
    // ...
}
```

–ï—Å–ª–∏ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç `user` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏ –≤ `Profile`, –∏ –≤ `TeamReport`, –æ–±–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –º–æ–≥—É—Ç —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Ä–∞–±–æ—Ç—É –∏ –≤—ã–∑–≤–∞—Ç—å `calculateUserMetrics` —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è —ç—Ç–æ–≥–æ `user`.

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –ø–µ—Ä–≤—ã–º —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è `Profile`. –û–Ω –≤—ã–∑–æ–≤–µ—Ç `getUserMetrics` –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç, –µ—Å—Ç—å –ª–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ü–æ—Å–∫–æ–ª—å–∫—É `getUserMetrics` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤–ø–µ—Ä–≤—ã–µ –¥–ª—è —ç—Ç–æ–≥–æ 'user', –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ø—Ä–æ–ø—É—Å–∫ –∫—ç—à–∞. –ó–∞—Ç–µ–º `getUserMetrics` –≤—ã–∑–æ–≤–µ—Ç `calculateUserMetrics` —Å —ç—Ç–∏–º `–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º` –∏ –∑–∞–ø–∏—à–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫—ç—à.

–ö–æ–≥–¥–∞ `TeamReport` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç —Å–≤–æ–π —Å–ø–∏—Å–æ–∫ 'users' –∏ –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç —Ç–æ–≥–æ –∂–µ —Å–∞–º–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ `user`, –æ–Ω –≤—ã–∑–æ–≤–µ—Ç `getUserMetrics` –∏ –ø—Ä–æ—á–∏—Ç–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑ –∫—ç—à–∞.

#### –í—ã–∑–æ–≤ —Ä–∞–∑–Ω—ã—Ö –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –±—É–¥–µ—Ç —Å—á–∏—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∫—ç—à–µ–π {#pitfall-different-memoized-functions}

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –æ–¥–Ω–æ–º—É –∏ —Ç–æ–º—É –∂–µ –∫—ç—à—É, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –≤—ã–∑—ã–≤–∞—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é.

```js hl_lines="8-9"
// Temperature.js
import { cache } from 'react';
import { calculateWeekReport } from './report';

export function Temperature({ cityData }) {
    // üö© Wrong: Calling `cache` in component creates
    // new `getWeekReport` for each render
    const getWeekReport = cache(calculateWeekReport);
    const report = getWeekReport(cityData);
    // ...
}
```

---

```js hl_lines="7 10"
// Precipitation.js
import { cache } from 'react';
import { calculateWeekReport } from './report';

// üö© Wrong: `getWeekReport` is only accessible
// for `Precipitation` component.
const getWeekReport = cache(calculateWeekReport);

export function Precipitation({ cityData }) {
    const report = getWeekReport(cityData);
    // ...
}
```

–í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –≤—ã—à–µ –ø—Ä–∏–º–µ—Ä–µ `Precipitation` –∏ `Temperature` –∫–∞–∂–¥—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç `cache` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –ø–æ–∏—Å–∫–æ–º –≤ –∫—ç—à–µ. –ï—Å–ª–∏ –æ–±–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–ª—è –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ `cityData`, –æ–Ω–∏ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥—É–±–ª–∏—Ä—É—é—â—É—é —Ä–∞–±–æ—Ç—É –ø–æ –≤—ã–∑–æ–≤—É `calculateWeekReport`.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, `Temperature` —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è, —á—Ç–æ –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–¥–µ–ª–∏—Ç—å –∫—ç—à.

–ß—Ç–æ–±—ã –º–∞–∫—Å–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –∫—ç—à—É –∏ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –æ–±—ä–µ–º —Ä–∞–±–æ—Ç—ã, –æ–±–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –¥–æ–ª–∂–Ω—ã –≤—ã–∑—ã–≤–∞—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–¥–Ω–æ–º—É –∏ —Ç–æ–º—É –∂–µ –∫—ç—à—É. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º –º–æ–¥—É–ª–µ, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ [`import`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/import) –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

```js hl_lines="5"
// getWeekReport.js
import { cache } from 'react';
import { calculateWeekReport } from './report';

export default cache(calculateWeekReport);
```

---

```js hl_lines="2 5"
// Temperature.js
import getWeekReport from './getWeekReport';

export default function Temperature({ cityData }) {
    const report = getWeekReport(cityData);
    // ...
}
```

---

```js hl_lines="2 5"
// Precipitation.js
import getWeekReport from './getWeekReport';

export default function Precipitation({ cityData }) {
    const report = getWeekReport(cityData);
    // ...
}
```

–ó–¥–µ—Å—å –æ–±–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤—ã–∑—ã–≤–∞—é—Ç –æ–¥–Ω—É –∏ —Ç—É –∂–µ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–∑ `./getWeekReport.js`, –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ –≤ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫—ç—à.

### –°–æ–≤–º–µ—Å—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–Ω–∏–º–∫–∞ –¥–∞–Ω–Ω—ã—Ö {#take-and-share-snapshot-of-data}

–ß—Ç–æ–±—ã –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–Ω–∏–º–∫–æ–º –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏, –≤—ã–∑–æ–≤–∏—Ç–µ `cache` —Å —Ñ—É–Ω–∫—Ü–∏–µ–π –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä `fetch`. –ö–æ–≥–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω—è—é—Ç –æ–¥–Ω—É –∏ —Ç—É –∂–µ –≤—ã–±–æ—Ä–∫—É –¥–∞–Ω–Ω—ã—Ö, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å, –∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –∏ —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –æ–¥–Ω–æ–º—É –∏ —Ç–æ–º—É –∂–µ —Å–Ω–∏–º–∫—É –¥–∞–Ω–Ω—ã—Ö –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å–µ—Ä–≤–µ—Ä–∞.

```js
import { cache } from 'react';
import { fetchTemperature } from './api.js';

const getTemperature = cache(async (city) => {
    return await fetchTemperature(city);
});

async function AnimatedWeatherCard({ city }) {
    const temperature = await getTemperature(city);
    // ...
}

async function MinimalWeatherCard({ city }) {
    const temperature = await getTemperature(city);
    // ...
}
```

–ï—Å–ª–∏ `AnimatedWeatherCard` –∏ `MinimalWeatherCard` —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –¥–ª—è –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –≥–æ—Ä–æ–¥–∞, —Ç–æ –æ–Ω–∏ –ø–æ–ª—É—á–∞—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Å–Ω–∏–º–æ–∫ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.

–ï—Å–ª–∏ `AnimatedWeatherCard` –∏ `MinimalWeatherCard` –ø–µ—Ä–µ–¥–∞—é—Ç —Ä–∞–∑–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≥–æ—Ä–æ–¥–∞ –≤ `getTemperature`, —Ç–æ `fetchTemperature` –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω –¥–≤–∞–∂–¥—ã, –∏ –∫–∞–∂–¥—ã–π —Å–∞–π—Ç –≤—ã–∑–æ–≤–∞ –ø–æ–ª—É—á–∏—Ç —Ä–∞–∑–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

–ì–æ—Ä–æ–¥ –¥–µ–π—Å—Ç–≤—É–µ—Ç –∫–∞–∫ –∫–ª—é—á –∫—ç—à–∞.

!!!note "–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥"

    –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

    ```js
    async function AnimatedWeatherCard({ city }) {
    	const temperature = await getTemperature(city);
    	// ...
    }
    ```

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö {#preload-data}

–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π –≤—ã–±–æ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É –¥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

```js
const getUser = cache(async (id) => {
    return await db.user.query(id);
});

async function Profile({ id }) {
    const user = await getUser(id);
    return (
        <section>
            <img src={user.profilePic} />
            <h2>{user.name}</h2>
        </section>
    );
}

function Page({ id }) {
    // ‚úÖ Good: start fetching the user data
    getUser(id);
    // ... some computational work
    return (
        <>
            <Profile id={id} />
        </>
    );
}
```

–ü—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ `Page` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç `getUser`, –Ω–æ –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –æ–Ω –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –≠—Ç–æ—Ç —Ä–∞–Ω–Ω–∏–π –≤—ã–∑–æ–≤ `getUser` –∑–∞–ø—É—Å–∫–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –ø–æ–∫–∞ `Page` –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥—Ä—É–≥—É—é –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É –∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç –¥–æ—á–µ—Ä–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

–ü—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ `Profile` –º—ã —Å–Ω–æ–≤–∞ –≤—ã–∑—ã–≤–∞–µ–º `getUser`. –ï—Å–ª–∏ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ `getUser` —É–∂–µ –≤–µ—Ä–Ω—É–ª –∏ –∫—ç—à–∏—Ä–æ–≤–∞–ª –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ, —Ç–æ –∫–æ–≥–¥–∞ `Profile` –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∏ –∂–¥–µ—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ, –æ–Ω –º–æ–∂–µ—Ç –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏—Ö –∏–∑ –∫—ç—à–∞, –Ω–µ —Ç—Ä–µ–±—É—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–π –ø—Ä–æ—Ü–µ–¥—É—Ä—ã. –ï—Å–ª–∏ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö –Ω–µ –±—ã–ª –∑–∞–≤–µ—Ä—à–µ–Ω, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —ç—Ç–æ–º —à–∞–±–ª–æ–Ω–µ —É–º–µ–Ω—å—à–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É –≤ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

#### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã {#caching-asynchronous-work}

–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ [–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/async_function) –≤—ã –ø–æ–ª—É—á–∏—Ç–µ [Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise) –¥–ª—è —ç—Ç–æ–π —Ä–∞–±–æ—Ç—ã. Promise —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —ç—Ç–æ–π —Ä–∞–±–æ—Ç—ã (_–≤ –æ–∂–∏–¥–∞–Ω–∏–∏_, _–≤—ã–ø–æ–ª–Ω–µ–Ω–∞_, _–Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞_) –∏ –µ–µ –∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `fetchData` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±–µ—â–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ–∂–∏–¥–∞–µ—Ç `fetch`.

```js
async function fetchData() {
    return await fetch(`https://...`);
}

const getData = cache(fetchData);

async function MyComponent() {
    getData();
    // ... some computational work
    await getData();
    // ...
}
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ `getData` –æ–±–µ—â–∞–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω–æ–µ –∏–∑ `fetchData`, –∫—ç—à–∏—Ä—É–µ—Ç—Å—è. –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–æ –∂–µ –æ–±–µ—â–∞–Ω–∏–µ.

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ `getData` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `await`, —Ç–æ–≥–¥–∞ –∫–∞–∫ –≤–æ –≤—Ç–æ—Ä–æ–º - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. [`await`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/await) - —ç—Ç–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä JavaScript, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∂–¥–∞—Ç—å –∏ –≤–µ—Ä–Ω–µ—Ç –≥–æ—Ç–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±–µ—â–∞–Ω–∏—è. –ü–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤ `getData` –ø—Ä–æ—Å—Ç–æ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç `fetch` –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±–µ—â–∞–Ω–∏—è, —á—Ç–æ–±—ã –≤—Ç–æ—Ä–æ–π `getData` –º–æ–≥ –µ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å.

–ï—Å–ª–∏ –∫–æ –≤—Ç–æ—Ä–æ–º—É –≤—ã–∑–æ–≤—É –æ–±–µ—â–∞–Ω–∏–µ –≤—Å–µ –µ—â–µ _–æ–∂–∏–¥–∞–µ—Ç_, —Ç–æ `await` —Å–¥–µ–ª–∞–µ—Ç –ø–∞—É–∑—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –ø–æ–∫–∞ –º—ã –∂–¥–µ–º `fetch`, React –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É, —Ç–µ–º —Å–∞–º—ã–º —Å–æ–∫—Ä–∞—â–∞—è –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≤—Ç–æ—Ä–æ–≥–æ –≤—ã–∑–æ–≤–∞.

–ï—Å–ª–∏ –æ–±–µ—â–∞–Ω–∏–µ —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ, –ª–∏–±–æ –æ—à–∏–±–∫–∞, –ª–∏–±–æ _–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π_ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, `await` –≤–µ—Ä–Ω–µ—Ç —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ. –í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö –≤—ã–∏–≥—Ä—ã—à –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞–ª–∏—Ü–æ.

#### –í—ã–∑–æ–≤ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤–Ω–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à {#pitfall-memoized-call-outside-component}

```js
import { cache } from 'react';

const getUser = cache(async (userId) => {
    return await db.user.query(userId);
});

// üö© Wrong: Calling memoized function outside
// of component will not memoize.
getUser('demo-id');

async function DemoProfile() {
    // ‚úÖ Good: `getUser` will memoize.
    const user = await getUser('demo-id');
    return <Profile user={user} />;
}
```

React –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∫—ç—à—É —Ç–æ–ª—å–∫–æ –¥–ª—è –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ. –ü—Ä–∏ –≤—ã–∑–æ–≤–µ `getUser` –≤–Ω–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –æ–Ω –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –±—É–¥–µ—Ç –æ—Ü–µ–Ω–∏–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –Ω–æ –Ω–µ –±—É–¥–µ—Ç —Å—á–∏—Ç—ã–≤–∞—Ç—å –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫—ç—à.

–≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ –¥–æ—Å—Ç—É–ø –∫ –∫—ç—à—É –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ [–∫–æ–Ω—Ç–µ–∫—Å—Ç](../../learn/passing-data-deeply-with-context.md), –∫–æ—Ç–æ—Ä—ã–π –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

### –ö–æ–≥–¥–∞ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `cache`, [`memo`](./memo.md) –∏–ª–∏ [`useMemo`](./useMemo.md)? {#cache-memo-usememo}

–í—Å–µ —É–ø–æ–º—è–Ω—É—Ç—ã–µ API –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç –º–µ–º–æ–∏–∑–∞—Ü–∏—é, –Ω–æ —Ä–∞–∑–Ω–∏—Ü–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –º–µ–º–æ–∏–∑–∞—Ü–∏–∏, –∫—Ç–æ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫—ç—à—É –∏ –∫–æ–≥–¥–∞ –∏—Ö –∫—ç—à –±—É–¥–µ—Ç –∞–Ω–Ω—É–ª–∏—Ä–æ–≤–∞–Ω.

#### `useMemo` {#deep-dive-use-memo}

–í –æ–±—â–µ–º —Å–ª—É—á–∞–µ –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –ø—Ä–∏ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–Ω–¥–µ—Ä–∞—Ö —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [`useMemo`](./useMemo.md). –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

```js hl_lines="4"
'use client';

function WeatherReport({ record }) {
    const avgTemp = useMemo(
        () => calculateAvg(record),
        record
    );
    // ...
}

function App() {
    const record = getRecord();
    return (
        <>
            <WeatherReport record={record} />
            <WeatherReport record={record} />
        </>
    );
}
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ `App` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–≤–∞ `WeatherReport` —Å –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –∑–∞–ø–∏—Å—å—é. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –æ–±–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç –æ–¥–Ω—É –∏ —Ç—É –∂–µ —Ä–∞–±–æ—Ç—É, –æ–Ω–∏ –Ω–µ –º–æ–≥—É—Ç –¥–µ–ª–∏—Ç—å—Å—è –µ—é. –ö—ç—à `useMemo` —è–≤–ª—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–º —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

–û–¥–Ω–∞–∫–æ `useMemo` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –µ—Å–ª–∏ `App` –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∏ –æ–±—ä–µ–∫—Ç `record` –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è, –∫–∞–∂–¥—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç —Ä–∞–±–æ—Ç—É –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `avgTemp`. `useMemo` –±—É–¥–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ `avgTemp` —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.

#### `cache` {#deep-dive-cache}

–í –æ–±—â–µ–º —Å–ª—É—á–∞–µ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `cache` –≤ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏.

```js
const cachedFetchReport = cache(fetchReport);

function WeatherReport({ city }) {
    const report = cachedFetchReport(city);
    // ...
}

function App() {
    const city = 'Los Angeles';
    return (
        <>
            <WeatherReport city={city} />
            <WeatherReport city={city} />
        </>
    );
}
```

–ï—Å–ª–∏ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø—Ä–∏–º–µ—Ä –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `cache`, —Ç–æ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –≤—Ç–æ—Ä–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä `WeatherReport` —Å–º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –∏ —á–∏—Ç–∞—Ç—å –∏–∑ —Ç–æ–≥–æ –∂–µ –∫—ç—à–∞, —á—Ç–æ –∏ –ø–µ—Ä–≤—ã–π `WeatherReport`. –ï—â–µ –æ–¥–Ω–∏–º –æ—Ç–ª–∏—á–∏–µ–º –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ `cache` —Ç–∞–∫–∂–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –¥–∞–Ω–Ω—ã—Ö, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç `useMemo`, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.

–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è `cache` —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö, –∏ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ —Å–µ—Ä–≤–µ—Ä—É –∫—ç—à –±—É–¥–µ—Ç –∞–Ω–Ω—É–ª–∏—Ä–æ–≤–∞–Ω.

#### `memo` {#deep-dive-memo}

–í—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [`memo`](./memo.md) –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –µ—Å–ª–∏ –µ–≥–æ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å.

```js
'use client';

function WeatherReport({ record }) {
    const avgTemp = calculateAvg(record);
    // ...
}

const MemoWeatherReport = memo(WeatherReport);

function App() {
    const record = getRecord();
    return (
        <>
            <MemoWeatherReport record={record} />
            <MemoWeatherReport record={record} />
        </>
    );
}
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –æ–±–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `MemoWeatherReport` –≤—ã–∑–æ–≤—É—Ç `calculateAvg` –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ. –û–¥–Ω–∞–∫–æ –µ—Å–ª–∏ `App` –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ `record`, –Ω–∏ –æ–¥–∏–Ω –∏–∑ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è, –∏ `MemoWeatherReport` –Ω–µ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è.

–ü–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å `useMemo`, `memo` –º–µ–º–æ–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π. –ö–∞–∫ –∏ –≤ —Å–ª—É—á–∞–µ —Å `useMemo`, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –º–µ–º–æ–∏–∑–∞—Ü–∏–µ–π –∫—ç—à–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤. –ö–∞–∫ —Ç–æ–ª—å–∫–æ —Ä–µ–∫–≤–∏–∑–∏—Ç –º–µ–Ω—è–µ—Ç—Å—è, –∫—ç—à –∞–Ω–Ω—É–ª–∏—Ä—É–µ—Ç—Å—è –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∑–∞–Ω–æ–≤–æ.

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫ {#troubleshooting}

### –ú–æ—è –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—Å–µ –µ—â–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –¥–∞–∂–µ –µ—Å–ª–∏ —è –≤—ã–∑—ã–≤–∞–ª –µ–µ —Å —Ç–µ–º–∏ –∂–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏ {#memoized-function-still-runs}

–°–º. —Ä–∞–Ω–µ–µ —É–ø–æ–º—è–Ω—É—Ç—ã–µ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏

-   [–í—ã–∑–æ–≤ —Ä–∞–∑–Ω—ã—Ö –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –±—É–¥–µ—Ç —Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∫—ç—à–µ–π](#pitfall-different-memoized-functions)
-   [–í—ã–∑–æ–≤ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤–Ω–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à](#pitfall-memoized-call-outside-component).

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –∏–∑ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω–æ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, –∫–∞–∫ React –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —á—Ç–æ-—Ç–æ –≤ –∫—ç—à–µ.

–ï—Å–ª–∏ –≤–∞—à–∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –Ω–µ —è–≤–ª—è—é—Ç—Å—è [–ø—Ä–∏–º–∏—Ç–∏–≤–∞–º–∏](https://developer.mozilla.org/docs/Glossary/Primitive) (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±—ä–µ–∫—Ç—ã, —Ñ—É–Ω–∫—Ü–∏–∏, –º–∞—Å—Å–∏–≤—ã), —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ –æ–¥–Ω—É –∏ —Ç—É –∂–µ —Å—Å—ã–ª–∫—É –Ω–∞ –æ–±—ä–µ–∫—Ç.

–ü—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ React –ø—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç –≤—Ö–æ–¥–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç —Ç–æ–≥–æ, –Ω–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω –ª–∏ —É–∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç. React –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–≥–ª—É–±–æ–∫–æ–µ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ –∫—ç—à.

```js
import { cache } from 'react';

const calculateNorm = cache((vector) => {
    // ...
});

function MapMarker(props) {
    // üö© Wrong: props is an object that changes every render.
    const length = calculateNorm(props);
    // ...
}

function App() {
    return (
        <>
            <MapMarker x={10} y={10} z={10} />
            <MapMarker x={10} y={10} z={10} />
        </>
    );
}
```

–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –¥–≤–∞ `MapMarker` –≤—ã–≥–ª—è–¥—è—Ç —Ç–∞–∫, –∫–∞–∫ –±—É–¥—Ç–æ –æ–Ω–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç –æ–¥–Ω—É –∏ —Ç—É –∂–µ —Ä–∞–±–æ—Ç—É –∏ –≤—ã–∑—ã–≤–∞—é—Ç `calculateNorm` —Å –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ–º `{x: 10, y: 10, z:10}`. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –æ–±—ä–µ–∫—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –æ–Ω–∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –æ–±—ä–µ–∫—Ç–Ω–æ–π —Å—Å—ã–ª–∫–æ–π, –ø–æ—Å–∫–æ–ª—å–∫—É –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç `props`.

React –≤—ã–∑–æ–≤–µ—Ç [`Object.is`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/is) –Ω–∞ –≤—Ö–æ–¥–µ, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ –∫—ç—à.

```js hl_lines="3 9"
import { cache } from 'react';

const calculateNorm = cache((x, y, z) => {
    // ...
});

function MapMarker(props) {
    // ‚úÖ Good: Pass primitives to memoized function
    const length = calculateNorm(props.x, props.y, props.z);
    // ...
}

function App() {
    return (
        <>
            <MapMarker x={10} y={10} z={10} />
            <MapMarker x={10} y={10} z={10} />
        </>
    );
}
```

–û–¥–Ω–∏–º –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞—á–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ –≤–µ–∫—Ç–æ—Ä–∞ –≤ `calculateNorm`. –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–∞–º–∏ —Ä–∞–∑–º–µ—Ä—ã —è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏–º–∏—Ç–∏–≤–∞–º–∏.

–î—Ä—É–≥–∏–º —Ä–µ—à–µ–Ω–∏–µ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞—á–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É —Å–∞–º–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –≤–µ–∫—Ç–æ—Ä–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞. –ù–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç –æ–±–æ–∏–º —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

```js hl_lines="3 9"
import { cache } from 'react';

const calculateNorm = cache((vector) => {
    // ...
});

function MapMarker(props) {
    // ‚úÖ Good: Pass the same `vector` object
    const length = calculateNorm(props.vector);
    // ...
}

function App() {
    const vector = [10, 10, 10];
    return (
        <>
            <MapMarker vector={vector} />
            <MapMarker vector={vector} />
        </>
    );
}
```

<small>:material-information-outline: –ò—Å—Ç–æ—á–Ω–∏–∫ &mdash; [https://react.dev/reference/react/cache](https://react.dev/reference/react/cache)</small>
